<div class="kettles col-md-{{kettles.length==5?2:12/kettles.length}}" ng-repeat="kettle in kettles track by $index" id="kettle{{$index}}">

  <div class="panel panel-default">
    <div class="panel-heading" ng-swipe-left="showRemoveKettle = true" ng-swipe-right="showRemoveKettle = false">
      <div class="left"><h3><editable model="kettle.key">{{kettle.key}}</editable></h3>
        <div class="btn-group">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            A{{kettle.pin}} <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li ng-repeat="p in [0,1,2,3,4,5] track by $index"><a href="#" ng-click="kettle.pin=p" ng-if="p != kettle.pin">A{{p}}</a></li>
          </ul>
        </div>
        <br/>Heat
        <div class="btn-group">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            D{{kettle.heater.pin}} <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li ng-repeat="p in [2,3,4,5] track by $index"><a href="#" ng-click="kettle.heater.pin=p" ng-if="p != kettle.heater.pin">D{{p}}</a></li>
          </ul>
        </div>
      </div>
      <div ng-show="!showRemoveKettle" class="right">
        <span class="fa-stack fa-2x" ng-click="startStopKettleHeat(kettle)">
          <i class="fa fa-sun-o fa-stack-2x" ng-class="{'fa-spin':kettle.heater.running}"></i>
          <i class="fa fa-stack-1x" ng-class="{'fa-fire on':kettle.heater.on,'fa-fire off':!kettle.heater.on}"></i>
        </span>
        <i class="fa fa-4x" ng-click="startStopKettle(kettle)" ng-class="{'fa-stop-circle':kettle.active,'fa-play-circle':!kettle.active}"></i>
      </div>
      <div ng-show="showRemoveKettle" class="remove right"><button class="btn btn-danger" ng-click="showRemoveKettle=false;kettles.splice($index,1)">Remove Kettle</button></div>
    </div>
    <div class="panel-body">
      <ul>
        <li>
          <label>Current Temp:</label> <span class="temp" ng-class="{'high':kettle.high,'low':kettle.low}">{{kettle.temp.current}}&deg;{{settings.unit}}</span>
        </li>
        <li>
          <label>Target Temp:</label> <input type="number" ng-model="kettles[$index].temp.target"> &deg;{{settings.unit}}
          <br><i class="fa fa-minus-circle fa-4x" ng-click="changeValue($index,'temp.target',false)"></i> <i class="fa fa-plus-circle fa-4x" ng-click="changeValue($index,'temp.target',true)"></i>
        </li>
        <li>
          <label>Alert Diff:</label>
          <input type="number" ng-model="kettles[$index].temp.diff"> &deg;{{settings.unit}}
          <br><i class="fa fa-minus-circle fa-4x" ng-click="changeValue($index,'diff',false)"></i> <i class="fa fa-plus-circle fa-4x" ng-click="changeValue($index,'diff',true)"></i>
        </li>
        <li ng-if="kettle.timer" ng-swipe-left="showRemoveTimer = true" ng-swipe-right="showRemoveTimer = false">
          <label>Time:</label> <input type="number" ng-model="kettles[$index].timer.min" steps="5"> minutes
          <i class="fa fa-4x" ng-click="timerStart($index)" ng-class="{'fa-stop-circle':kettle.timer.running,'fa-play-circle':!kettle.timer.running}"></i>
          <span class="timer">{{kettles[$index].timer.min}}:{{kettles[$index].timer.sec}}</span>
          <br><i class="fa fa-minus-circle fa-4x" ng-click="kettle.timer.min=kettle.timer.min-1"></i> <i class="fa fa-plus-circle fa-4x" ng-click="kettle.timer.min=kettle.timer.min+1"></i>
          <button ng-show="showRemoveTimer" class="btn btn-danger pull-right" ng-click="kettle.timer=null;">Remove Timer</button>
        </li>
        <li ng-if="!kettle.timer">
          <button class="btn btn-default" ng-click="kettle.timer={min:60,sec:0,running:false};">Add Timer</button>
        </li>
      </ul>
    </div>

  </div>

</div>
